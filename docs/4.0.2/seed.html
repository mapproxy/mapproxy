
<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Seeding &#8212; MapProxy Docs 2.0.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mapproxy.css?v=9ab0fcd5" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=a7d515d7"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'seed';</script>
    <link rel="canonical" href="/mapproxy/seed.html" />
    <link rel="icon" href="_static/mapproxy-favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Coverages" href="coverages.html" />
    <link rel="prev" title="Caches" href="caches.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Apr 10, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item"><div class="btn-group">
    <button type="button" class="btn btn-outline-info btn-select-version">4.0.2</button>
    <button type="button" class="btn btn-outline-info btn-select-version dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown"
        aria-expanded="false">
        <span class="visually-hidden">toggle</span>
    </button>
    <ul id="versions-menu" class="dropdown-menu">
    </ul>
    <script>
        fetch('../config/versions.json')
            .then(response => {
                return response.json();
            })
            .then(versions => {
                const menu = document.querySelector('#versions-menu');
                for (const version of versions) {
                    const a = document.createElement('a');
                    a.classList.add("dropdown-item");
                    a.href = `https://mapproxy.github.io/mapproxy/${version}/`;
                    a.textContent = version;
                    const li = document.createElement('li');
                    li.append(a);
                    menu.append(li);
                }
            });
    </script>
</div></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    
  </div>
  
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo_title.png" class="logo__image only-light" alt="MapProxy Docs 2.0.0 documentation - Home"/>
    <script>document.write(`<img src="_static/logo_title.png" class="logo__image only-dark" alt="MapProxy Docs 2.0.0 documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_osgeo4w.html">Installation on OSGeo4W</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_windows.html">Installation on Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_docker.html">Installation via Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="sources.html">Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="caches.html">Caches</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Seeding</a></li>
<li class="toctree-l1"><a class="reference internal" href="coverages.html">Coverages</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapproxy_util.html">mapproxy-util</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapproxy_util_autoconfig.html">mapproxy-util autoconfig</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration_examples.html">Configuration examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="ogc_api.html">OGC API Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="inspire.html">INSPIRE View Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="labeling.html">WMS Labeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="auth.html">Authentication and Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="decorate_img.html">Decorate Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Writing plugins</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/mapproxy/mapproxy" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Seeding</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2>  </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#method">Method</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mapproxy-seed">mapproxy-seed</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#options">Options</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration">Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seeds"><code class="docutils literal notranslate"><span class="pre">seeds</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caches"><code class="docutils literal notranslate"><span class="pre">caches</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grids"><code class="docutils literal notranslate"><span class="pre">grids</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#levels"><code class="docutils literal notranslate"><span class="pre">levels</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coverages"><code class="docutils literal notranslate"><span class="pre">coverages</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#refresh-before"><code class="docutils literal notranslate"><span class="pre">refresh_before</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cleanups"><code class="docutils literal notranslate"><span class="pre">cleanups</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2"><code class="docutils literal notranslate"><span class="pre">caches</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3"><code class="docutils literal notranslate"><span class="pre">grids</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4"><code class="docutils literal notranslate"><span class="pre">levels</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5"><code class="docutils literal notranslate"><span class="pre">coverages</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-all"><code class="docutils literal notranslate"><span class="pre">remove_all</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-before"><code class="docutils literal notranslate"><span class="pre">remove_before</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7"><code class="docutils literal notranslate"><span class="pre">coverages</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#output">Output</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-background-seeding">Example: Background seeding</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="seeding">
<h1>Seeding<a class="headerlink" href="#seeding" title="Permalink to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>The MapProxy creates all tiles on demand. To improve the performance for commonly
requested areas it is possible to pre-generate these tiles. The <code class="docutils literal notranslate"><span class="pre">mapproxy-seed</span></code> script does this task.</p>
<p>The tool can seed one or more polygon or BBOX areas for each cache. It can seed missing tiles and refresh old tiles. A <cite>cleanup</cite> can be used to remove old tiles.</p>
<section id="method">
<span id="seed-method"></span><h3>Method<a class="headerlink" href="#method" title="Permalink to this heading">#</a></h3>
<p>MapProxy does not seed the tile pyramid level by level, but traverses the tile pyramid depth-first. It starts in the first zoom level and decides if the tiles in the next zoom level need to be seeded by checking each subtile for intersection with the coverage. It recursively repeats this step for all tiles below till it reaches the last zoom level to seed. Only then, before getting back to the parent tile, the tile is actually seeded.</p>
<p>The following shows in which order tiles are seeded for a simple cache with three levels:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Level</span> <span class="mi">0</span> <span class="k">with</span> <span class="mi">1</span> <span class="n">tile</span><span class="p">:</span>

          <span class="mi">21</span>

<span class="n">Level</span> <span class="mi">1</span> <span class="k">with</span> <span class="mi">4</span> <span class="n">tiles</span><span class="p">:</span>

         <span class="mi">5</span>  <span class="mi">10</span>
        <span class="mi">15</span>  <span class="mi">20</span>

<span class="n">Level</span> <span class="mi">2</span> <span class="k">with</span> <span class="mi">16</span> <span class="n">tiles</span><span class="p">:</span>

      <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">6</span>  <span class="mi">7</span>
      <span class="mi">3</span>  <span class="mi">4</span>  <span class="mi">8</span>  <span class="mi">9</span>
     <span class="mi">11</span> <span class="mi">12</span> <span class="mi">16</span> <span class="mi">17</span>
     <span class="mi">13</span> <span class="mi">14</span> <span class="mi">18</span> <span class="mi">19</span>
</pre></div>
</div>
<p>This method is optimized to work <cite>with</cite> the caches of your operating system and geospatial database, as the same area is requested for multiple scales in direct succession.</p>
<p>It also makes checks against complex coverages efficient as subtiles can be rejected early on.</p>
</section>
</section>
<section id="mapproxy-seed">
<h2>mapproxy-seed<a class="headerlink" href="#mapproxy-seed" title="Permalink to this heading">#</a></h2>
<p>The command line script expects a seed configuration that describes which tiles from which layer should be generated. See <a class="reference internal" href="#configuration">configuration</a> for the format of the file.</p>
<section id="options">
<h3>Options<a class="headerlink" href="#options" title="Permalink to this heading">#</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-s">
<span id="cmdoption-seed-conf"></span><span class="sig-name descname"><span class="pre">-s</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;seed.yaml&gt;</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--seed-conf</span></span><span class="sig-prename descclassname"><span class="pre">=&lt;seed.yaml&gt;</span></span><a class="headerlink" href="#cmdoption-s" title="Permalink to this definition">#</a></dt>
<dd><p>The seed configuration. You can also pass the configuration as the last argument to <code class="docutils literal notranslate"><span class="pre">mapproxy-seed</span></code></p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-f">
<span id="cmdoption-proxy-conf"></span><span class="sig-name descname"><span class="pre">-f</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;mapproxy.yaml&gt;</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--proxy-conf</span></span><span class="sig-prename descclassname"><span class="pre">=&lt;mapproxy.yaml&gt;</span></span><a class="headerlink" href="#cmdoption-f" title="Permalink to this definition">#</a></dt>
<dd><p>The MapProxy configuration to use. This file should describe all caches and grids that the seed configuration references.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-c">
<span id="cmdoption-concurrency"></span><span class="sig-name descname"><span class="pre">-c</span></span><span class="sig-prename descclassname"> <span class="pre">N</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--concurrency</span></span><span class="sig-prename descclassname"> <span class="pre">N</span></span><a class="headerlink" href="#cmdoption-c" title="Permalink to this definition">#</a></dt>
<dd><p>The number of concurrent seed worker. Some parts of the seed tool are CPU intensive
(image splitting and encoding), use this option to distribute that load across multiple
CPUs. To limit the concurrent requests to the source WMS see
<a class="reference internal" href="sources.html#wms-source-concurrent-requests-label"><span class="std std-ref">concurrent_requests</span></a></p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-n">
<span id="cmdoption-dry-run"></span><span class="sig-name descname"><span class="pre">-n</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--dry-run</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-n" title="Permalink to this definition">#</a></dt>
<dd><p>This will simulate the seed/cleanup process without requesting, creating or removing any tiles.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-l">
<span id="cmdoption-skip-geoms-for-last-levels"></span><span class="sig-name descname"><span class="pre">-l</span></span><span class="sig-prename descclassname"> <span class="pre">N</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--skip-geoms-for-last-levels</span></span><span class="sig-prename descclassname"> <span class="pre">N</span></span><a class="headerlink" href="#cmdoption-l" title="Permalink to this definition">#</a></dt>
<dd><p>This will skip checking the intersections between tiles and seed geometries on the last N levels.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-skip-uncached">
<span class="sig-name descname"><span class="pre">--skip-uncached</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-skip-uncached" title="Permalink to this definition">#</a></dt>
<dd><p>This will seed only tiles which are already in the cache. This option is interesting in combination with
the configuration entry <a class="reference internal" href="#refresh-before">refresh_before</a> to refresh regularly the existing tiles and to avoid loading
all available tiles.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-summary">
<span class="sig-name descname"><span class="pre">--summary</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-summary" title="Permalink to this definition">#</a></dt>
<dd><p>Print a summary of all seeding and cleanup tasks and exit.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-quiet">
<span class="sig-name descname"><span class="pre">--quiet</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-quiet" title="Permalink to this definition">#</a></dt>
<dd><p>Reduce the output of the progress logger.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-i">
<span id="cmdoption-interactive"></span><span class="sig-name descname"><span class="pre">-i</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--interactive</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-i" title="Permalink to this definition">#</a></dt>
<dd><p>Print a summary of each seeding and cleanup task and ask if <code class="docutils literal notranslate"><span class="pre">mapproxy-seed</span></code> should seed/cleanup that task. It will query for each task before it starts.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-seed">
<span class="sig-name descname"><span class="pre">--seed</span></span><span class="sig-prename descclassname"><span class="pre">=&lt;task1,task2,..&gt;</span></span><a class="headerlink" href="#cmdoption-seed" title="Permalink to this definition">#</a></dt>
<dd><p>Only seed the named seeding tasks. You can select multiple tasks with a list of comma separated  names, or you can use the <code class="docutils literal notranslate"><span class="pre">--seed</span></code> option multiple times.
You can use <code class="docutils literal notranslate"><span class="pre">ALL</span></code> to select all tasks.
This disables all cleanup tasks unless you also use the <code class="docutils literal notranslate"><span class="pre">--cleanup</span></code> option.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-cleanup">
<span class="sig-name descname"><span class="pre">--cleanup</span></span><span class="sig-prename descclassname"><span class="pre">=&lt;task1,task2,..&gt;</span></span><a class="headerlink" href="#cmdoption-cleanup" title="Permalink to this definition">#</a></dt>
<dd><p>Only cleanup the named tasks. You can select multiple tasks with a list of comma separated  names, or you can use the <code class="docutils literal notranslate"><span class="pre">--cleanup</span></code> option multiple times.
You can use <code class="docutils literal notranslate"><span class="pre">ALL</span></code> to select all tasks.
This disables all seeding tasks unless you also use the <code class="docutils literal notranslate"><span class="pre">--seed</span></code> option.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-continue">
<span class="sig-name descname"><span class="pre">--continue</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-continue" title="Permalink to this definition">#</a></dt>
<dd><p>Continue an interrupted seed progress. MapProxy will start the seeding progress at the beginning if the progress file (<code class="docutils literal notranslate"><span class="pre">--progress-file</span></code>) was not found.  MapProxy can only continue if the previous seed was started with the <code class="docutils literal notranslate"><span class="pre">--progress-file</span></code> or <code class="docutils literal notranslate"><span class="pre">--continue</span></code> option.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-progress-file">
<span class="sig-name descname"><span class="pre">--progress-file</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-progress-file" title="Permalink to this definition">#</a></dt>
<dd><p>Filename where MapProxy stores the seeding progress for the <code class="docutils literal notranslate"><span class="pre">--continue</span></code> option. Defaults to <code class="docutils literal notranslate"><span class="pre">.mapproxy_seed_progress</span></code> in the current working directory. MapProxy will remove that file after a successful seed.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-duration">
<span class="sig-name descname"><span class="pre">--duration</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-duration" title="Permalink to this definition">#</a></dt>
<dd><p>Stop seeding process after this duration. This option accepts duration in the following format: 120s, 15m, 4h, 0.5d
Use this option in combination with <code class="docutils literal notranslate"><span class="pre">--continue</span></code> to be able to resume the seeding. Works only on Linux and Unix systems.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-reseed-file">
<span class="sig-name descname"><span class="pre">--reseed-file</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-reseed-file" title="Permalink to this definition">#</a></dt>
<dd><p>File created by <code class="docutils literal notranslate"><span class="pre">mapproxy-seed</span></code> at the start of a new seeding.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-reseed-interval">
<span class="sig-name descname"><span class="pre">--reseed-interval</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-reseed-interval" title="Permalink to this definition">#</a></dt>
<dd><p>Only start seeding if <code class="docutils literal notranslate"><span class="pre">--reseed-file</span></code> is older than this duration.
This option accepts duration in the following format: 120s, 15m, 4h, 0.5d
Use this option in combination with <code class="docutils literal notranslate"><span class="pre">--continue</span></code> to be able to resume the seeding. By default,</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-use-cache-lock">
<span class="sig-name descname"><span class="pre">--use-cache-lock</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-use-cache-lock" title="Permalink to this definition">#</a></dt>
<dd><p>Lock each cache to prevent multiple parallel <cite>mapproxy-seed</cite> calls to work on the same cache.
It does not lock normal operation of MapProxy.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-log-config">
<span class="sig-name descname"><span class="pre">--log-config</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-log-config" title="Permalink to this definition">#</a></dt>
<dd><p>The logging configuration file to use.</p>
</dd></dl>

<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0: </span><code class="docutils literal notranslate"><span class="pre">--continue</span></code> and <code class="docutils literal notranslate"><span class="pre">--progress-file</span></code> option</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.7.0: </span><code class="docutils literal notranslate"><span class="pre">--log-config</span></code> option</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.10.0: </span><code class="docutils literal notranslate"><span class="pre">--duration</span></code>, <code class="docutils literal notranslate"><span class="pre">--reseed-file</span></code> and <code class="docutils literal notranslate"><span class="pre">--reseed-interval</span></code> option</p>
</div>
</section>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">#</a></h3>
<p>Seed with concurrency of 4:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mapproxy-seed<span class="w"> </span>-f<span class="w"> </span>mapproxy.yaml<span class="w"> </span>-c<span class="w"> </span><span class="m">4</span><span class="w"> </span>seed.yaml
</pre></div>
</div>
<p>Print summary of all seed tasks and exit:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mapproxy-seed<span class="w"> </span>-f<span class="w"> </span>mapproxy.yaml<span class="w"> </span>-s<span class="w"> </span>seed.yaml<span class="w"> </span>--summary<span class="w"> </span>--seed<span class="w"> </span>ALL
</pre></div>
</div>
<p>Interactively select which tasks should be seeded:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mapproxy-seed<span class="w"> </span>-f<span class="w"> </span>mapproxy.yaml<span class="w"> </span>-s<span class="w"> </span>seed.yaml<span class="w"> </span>-i
</pre></div>
</div>
<p>Seed task1 and task2 and cleanup task3 with concurrency of 2:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mapproxy-seed<span class="w"> </span>-f<span class="w"> </span>mapproxy.yaml<span class="w"> </span>-s<span class="w"> </span>seed.yaml<span class="w"> </span>-c<span class="w"> </span><span class="m">2</span><span class="w"> </span>--seed<span class="w"> </span>task1,task2<span class="w"> </span><span class="se">\</span>
<span class="w"> </span>--cleanup<span class="w"> </span>task3
</pre></div>
</div>
</section>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">#</a></h2>
<p>The configuration is a YAML file with three sections:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">seeds</span></code></dt><dd><p>Configure seeding tasks.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cleanups</span></code></dt><dd><p>Configure cleanup tasks.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">coverages</span></code></dt><dd><p>Configure coverages for seeding and cleanup tasks.</p>
</dd>
</dl>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this heading">#</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">seeds</span><span class="p">:</span>
<span class="w">  </span><span class="nt">myseed1</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">myseed2</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>

<span class="nt">cleanups</span><span class="p">:</span>
<span class="w">  </span><span class="nt">mycleanup1</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">mycleanup2</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>

<span class="nt">coverages</span><span class="p">:</span>
<span class="w">  </span><span class="nt">mycoverage1</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">mycoverage2</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
</section>
<section id="seeds">
<h2><code class="docutils literal notranslate"><span class="pre">seeds</span></code><a class="headerlink" href="#seeds" title="Permalink to this heading">#</a></h2>
<p>Here you can define multiple seeding tasks. A task defines <em>what</em> should be seeded. Each task is configured as a dictionary with the name of the task as the key. You can use the names to select single tasks on the command line of <code class="docutils literal notranslate"><span class="pre">mapproxy-seed</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">mapproxy-seed</span></code> will always process one tile pyramid after the other. Each tile pyramid is defined by a cache and a corresponding grid. A cache with multiple grids consists of multiple tile pyramids. You can configure which tile pyramid you want to seed with the <code class="docutils literal notranslate"><span class="pre">caches</span></code> and <code class="docutils literal notranslate"><span class="pre">grids</span></code> options.</p>
<p>You can further limit the part of the tile pyramid with the <code class="docutils literal notranslate"><span class="pre">levels</span></code> and <code class="docutils literal notranslate"><span class="pre">coverages</span></code> options.</p>
<p>Each seed tasks takes the following options:</p>
<section id="caches">
<h3><code class="docutils literal notranslate"><span class="pre">caches</span></code><a class="headerlink" href="#caches" title="Permalink to this heading">#</a></h3>
<p>A list with the caches that should be seeded for this task. The names should match the cache names in your MapProxy configuration.</p>
</section>
<section id="grids">
<h3><code class="docutils literal notranslate"><span class="pre">grids</span></code><a class="headerlink" href="#grids" title="Permalink to this heading">#</a></h3>
<p>A list with the grid names that should be seeded for the <code class="docutils literal notranslate"><span class="pre">caches</span></code>.
The names should match the grid names in your MapProxy configuration.
All caches of this tasks need to support the grids you specify here.
By default, the grids that are common to all configured caches will be seeded.</p>
</section>
<section id="levels">
<h3><code class="docutils literal notranslate"><span class="pre">levels</span></code><a class="headerlink" href="#levels" title="Permalink to this heading">#</a></h3>
<p>Either a list of levels that should be seeded, or a dictionary with <code class="docutils literal notranslate"><span class="pre">from</span></code> and <code class="docutils literal notranslate"><span class="pre">to</span></code> that define a range of levels. You can omit <code class="docutils literal notranslate"><span class="pre">from</span></code> to start at level 0, or you can omit <code class="docutils literal notranslate"><span class="pre">to</span></code> to seed till the last level.
By default, all levels will be seeded.</p>
<p>Examples:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># seed multiple levels</span>
<span class="nt">levels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">8</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">9</span><span class="p p-Indicator">]</span>

<span class="c1"># seed a single level</span>
<span class="nt">levels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">3</span><span class="p p-Indicator">]</span>

<span class="c1"># seed from level 0 to 10 (including level 10)</span>
<span class="nt">levels</span><span class="p">:</span>
<span class="w">  </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="c1"># seed from level 3 to 6 (including level 3 and 6)</span>
<span class="nt">levels</span><span class="p">:</span>
<span class="w">  </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
</pre></div>
</div>
</section>
<section id="coverages">
<h3><code class="docutils literal notranslate"><span class="pre">coverages</span></code><a class="headerlink" href="#coverages" title="Permalink to this heading">#</a></h3>
<p>A list with coverage names. Limits the seed area to the coverages. By default, the whole coverage of the grids will be seeded.</p>
</section>
<section id="refresh-before">
<h3><code class="docutils literal notranslate"><span class="pre">refresh_before</span></code><a class="headerlink" href="#refresh-before" title="Permalink to this heading">#</a></h3>
<p>Regenerate all tiles that are older than the given date. The date can either be absolute or relative. By default, existing tiles will not be refreshed.</p>
<p>MapProxy can also use the last modification time of a file. File paths should be relative to the proxy configuration or absolute.</p>
<p>Examples:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># absolute as ISO time</span>
<span class="nt">refresh_before</span><span class="p">:</span>
<span class="w">  </span><span class="nt">time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2010-10-21T12:35:00</span>

<span class="c1"># relative from the start time of the seed process</span>
<span class="nt">refresh_before</span><span class="p">:</span>
<span class="w">  </span><span class="nt">weeks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
<span class="w">  </span><span class="nt">hours</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">  </span><span class="nt">minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>

<span class="c1"># modification time of a given file</span>
<span class="nt">refresh_before</span><span class="p">:</span>
<span class="w">  </span><span class="nt">mtime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">path/to/file</span>
</pre></div>
</div>
</section>
<section id="id1">
<h3>Example<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">seeds</span><span class="p">:</span>
<span class="w">  </span><span class="nt">myseed1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">caches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">osm_cache</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">coverages</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">germany</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">grids</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">GLOBAL_MERCATOR</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">levels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="w">  </span><span class="nt">myseed2</span><span class="p">:</span>
<span class="w">    </span><span class="nt">caches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">osm_cache</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">coverages</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">niedersachsen</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">bremen</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">hamburg</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">grids</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">GLOBAL_MERCATOR</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">refresh_before</span><span class="p">:</span>
<span class="w">      </span><span class="nt">weeks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">    </span><span class="nt">levels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">      </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
</pre></div>
</div>
</section>
</section>
<section id="cleanups">
<h2><code class="docutils literal notranslate"><span class="pre">cleanups</span></code><a class="headerlink" href="#cleanups" title="Permalink to this heading">#</a></h2>
<p>Here you can define multiple cleanup tasks. Each task is configured as a dictionary with the name of the task as the key. You can use the names to select single tasks on the command line of <code class="docutils literal notranslate"><span class="pre">mapproxy-seed</span></code>.</p>
<section id="id2">
<h3><code class="docutils literal notranslate"><span class="pre">caches</span></code><a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h3>
<p>A list with the caches where you want to cleanup old tiles. The names should match the cache names in your MapProxy configuration.</p>
</section>
<section id="id3">
<h3><code class="docutils literal notranslate"><span class="pre">grids</span></code><a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h3>
<p>A list with the grid names for the <code class="docutils literal notranslate"><span class="pre">caches</span></code> where you want to cleanup.
The names should match the grid names in your MapProxy configuration.
All caches of this tasks need to support the grids you specify here.
By default, the grids that are common to all configured caches will be used.</p>
</section>
<section id="id4">
<h3><code class="docutils literal notranslate"><span class="pre">levels</span></code><a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h3>
<p>Either a list of levels that should be cleaned up, or a dictionary with <code class="docutils literal notranslate"><span class="pre">from</span></code> and <code class="docutils literal notranslate"><span class="pre">to</span></code> that define a range of levels. You can omit <code class="docutils literal notranslate"><span class="pre">from</span></code> to start at level 0, or you can omit <code class="docutils literal notranslate"><span class="pre">to</span></code> to cleanup till the last level.
By default, all levels will be cleaned up.</p>
<p>Examples:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># cleanup multiple levels</span>
<span class="nt">levels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">8</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">9</span><span class="p p-Indicator">]</span>

<span class="c1"># cleanup a single level</span>
<span class="nt">levels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">3</span><span class="p p-Indicator">]</span>

<span class="c1"># cleanup from level 0 to 10 (including level 10)</span>
<span class="nt">levels</span><span class="p">:</span>
<span class="w">  </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="c1"># cleanup from level 3 to 6 (including level 3 and 6)</span>
<span class="nt">levels</span><span class="p">:</span>
<span class="w">  </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
</pre></div>
</div>
</section>
<section id="id5">
<h3><code class="docutils literal notranslate"><span class="pre">coverages</span></code><a class="headerlink" href="#id5" title="Permalink to this heading">#</a></h3>
<p>A list with coverage names. Limits the cleanup area to the coverages. By default, the whole coverage of the grids will be cleaned up.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be careful when cleaning up caches with large coverages and levels with lots of tiles (&gt;14).
Without <code class="docutils literal notranslate"><span class="pre">coverages</span></code>, the seed tool works on the file system level and it only needs to check for existing tiles if they should be removed. With <code class="docutils literal notranslate"><span class="pre">coverages</span></code>, the seed tool traverses the whole tile pyramid and needs to check every possible tile if it exists and if it should be removed. This is much slower.</p>
</div>
</section>
<section id="remove-all">
<h3><code class="docutils literal notranslate"><span class="pre">remove_all</span></code><a class="headerlink" href="#remove-all" title="Permalink to this heading">#</a></h3>
<p>When set to true, remove all tiles regardless of the time they were created. You still limit the tiles with the <code class="docutils literal notranslate"><span class="pre">levels</span></code> and <code class="docutils literal notranslate"><span class="pre">coverage</span></code> options. MapProxy will try to remove tiles in a more efficient way with this option. For example: It will remove complete level directories for <code class="docutils literal notranslate"><span class="pre">file</span></code> caches instead of comparing each tile with a timestamp.</p>
</section>
<section id="remove-before">
<h3><code class="docutils literal notranslate"><span class="pre">remove_before</span></code><a class="headerlink" href="#remove-before" title="Permalink to this heading">#</a></h3>
<p>Remove all tiles that are older than the given date. The date can either be absolute or relative. <code class="docutils literal notranslate"><span class="pre">remove_before</span></code> defaults to the start time of the seed process, so that newly created tile will not be removed.</p>
<p>MapProxy can also use the last modification time of a file. File paths should be relative to the proxy configuration or absolute.</p>
<p>Examples:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># absolute as ISO time</span>
<span class="nt">remove_before</span><span class="p">:</span>
<span class="w">  </span><span class="nt">time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2010-10-21T12:35:00</span>

<span class="c1"># relative from the start time of the seed process</span>
<span class="nt">remove_before</span><span class="p">:</span>
<span class="w">  </span><span class="nt">weeks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
<span class="w">  </span><span class="nt">hours</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">  </span><span class="nt">minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>

<span class="c1"># modification time of a given file</span>
<span class="nt">remove_before</span><span class="p">:</span>
<span class="w">  </span><span class="nt">mtime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">path/to/file</span>
</pre></div>
</div>
</section>
<section id="id6">
<h3>Example<a class="headerlink" href="#id6" title="Permalink to this heading">#</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">cleanups</span><span class="p">:</span>
<span class="w">  </span><span class="nt">highres</span><span class="p">:</span>
<span class="w">    </span><span class="nt">caches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">osm_cache</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">grids</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">GLOBAL_MERCATOR</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">GLOBAL_SPERICAL</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">remove_before</span><span class="p">:</span>
<span class="w">      </span><span class="nt">days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">14</span>
<span class="w">    </span><span class="nt">levels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16</span>
<span class="w">  </span><span class="nt">old_project</span><span class="p">:</span>
<span class="w">    </span><span class="nt">caches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">osm_cache</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">grids</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">GLOBAL_MERCATOR</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">coverages</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">mypolygon</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">levels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">14</span>
<span class="w">      </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">18</span>
</pre></div>
</div>
</section>
</section>
<section id="id7">
<h2><code class="docutils literal notranslate"><span class="pre">coverages</span></code><a class="headerlink" href="#id7" title="Permalink to this heading">#</a></h2>
<p>There are three different ways to describe the extent of a seeding or cleanup task.</p>
<ul class="simple">
<li><p>a simple rectangular bounding box,</p></li>
<li><p>a text file with one or more polygons in WKT format,</p></li>
<li><p>polygons from any data source readable with OGR (e.g. Shapefile, GeoJSON, PostGIS)</p></li>
</ul>
<p>Read the <a class="reference internal" href="coverages.html"><span class="doc">coverage documentation</span></a> for more information.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need to install additional dependencies, if you want to use polygons to define your geographical extent of the seeding area, instead of simple bounding boxes. See <a class="reference internal" href="coverages.html"><span class="doc">coverage documentation</span></a>.</p>
</div>
<p>Each coverage has a name that is used in the seed and cleanup task configuration. If you don’t specify a coverage for a task, then the BBOX of the grid will be used.</p>
<section id="id8">
<h3>Example<a class="headerlink" href="#id8" title="Permalink to this heading">#</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">coverages</span><span class="p">:</span>
<span class="w">  </span><span class="nt">germany</span><span class="p">:</span>
<span class="w">    </span><span class="nt">datasource</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;shps/world_boundaries_m.shp&#39;</span>
<span class="w">    </span><span class="nt">where</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;CNTRY_NAME</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">&quot;Germany&quot;&#39;</span>
<span class="w">    </span><span class="nt">srs</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;EPSG:900913&#39;</span>
<span class="w">  </span><span class="nt">switzerland</span><span class="p">:</span>
<span class="w">    </span><span class="nt">datasource</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;polygons/SZ.txt&#39;</span>
<span class="w">    </span><span class="nt">srs</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;EPSG:900913&#39;</span>
<span class="w">  </span><span class="nt">austria</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bbox</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9.36</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">46.33</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">17.28</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">49.09</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">srs</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;EPSG:4326&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">mapproxy-seed</span></code> prints out the progress of the current seeding task on the console.</p>
<p>Example progress log:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">16</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">26</span><span class="p">]</span>  <span class="mi">4</span>  <span class="mf">41.00</span><span class="o">%</span> <span class="mi">582388</span><span class="p">,</span> <span class="mi">4734701</span><span class="p">,</span> <span class="mi">586740</span><span class="p">,</span> <span class="mi">4737666</span> <span class="p">(</span><span class="mi">5812</span> <span class="n">tiles</span><span class="p">)</span>
</pre></div>
</div>
<p>The output starts with the current time and ends with the number of tiles it has seeded or removed so far. The third value is the current progress in percent. The progress can make large jumps, if the seeding detects that a tile and all its subtiles are outside of the seeding coverage.
The second and fourth value show the level and bounding box of where the seeding tool is at this moment. Keep in mind that it does not seed level by level. This is described in <a class="reference internal" href="#seed-method"><span class="std std-ref">seeding method</span></a>.</p>
</section>
<section id="example-background-seeding">
<span id="background-seeding"></span><h2>Example: Background seeding<a class="headerlink" href="#example-background-seeding" title="Permalink to this heading">#</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.10.0: </span>Works on Linux and Unix only</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--duration</span></code> option allows you to run MapProxy seeding for a limited time. In combination with the <code class="docutils literal notranslate"><span class="pre">--continue</span></code> option, you can resume the seeding process later.
You can use this to call <code class="docutils literal notranslate"><span class="pre">mapproxy-seed</span></code> with <code class="docutils literal notranslate"><span class="pre">cron</span></code> to seed in the off-hours.</p>
<p>However, this will restart the seeding process from the beginning every time the seeding is completed.
You can prevent this with the <code class="docutils literal notranslate"><span class="pre">--reeseed-interval</span></code> and <code class="docutils literal notranslate"><span class="pre">--reseed-file</span></code> option.
The following example starts seeding for six hours. It will seed for another six hours, every time you call this command again. Once all seed and cleanup tasks were processed the command will exit immediately every time you call it within 14 days after the first call. After 14 days, the modification time of the <code class="docutils literal notranslate"><span class="pre">reseed.time</span></code> file will be updated and the re-seeding process starts again.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mapproxy</span><span class="o">-</span><span class="n">seed</span> <span class="o">-</span><span class="n">f</span> <span class="n">mapproxy</span><span class="o">.</span><span class="n">yaml</span> <span class="o">-</span><span class="n">s</span> <span class="n">seed</span><span class="o">.</span><span class="n">yaml</span>  \
  <span class="o">--</span><span class="n">reseed</span><span class="o">-</span><span class="n">interval</span> <span class="mi">14</span><span class="n">d</span> <span class="o">--</span><span class="n">duration</span> <span class="mi">6</span><span class="n">h</span> <span class="o">--</span><span class="n">reseed</span><span class="o">-</span><span class="n">file</span> <span class="n">reseed</span><span class="o">.</span><span class="n">time</span> \
  <span class="o">--</span><span class="k">continue</span> <span class="o">--</span><span class="n">progress</span><span class="o">-</span><span class="n">file</span> <span class="o">.</span><span class="n">mapproxy_seed_progress</span>
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">--reseed-file</span></code> as a <code class="docutils literal notranslate"><span class="pre">refresh_before</span></code> and <code class="docutils literal notranslate"><span class="pre">remove_before</span></code> <code class="docutils literal notranslate"><span class="pre">mtime</span></code>-file.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="caches.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Caches</p>
      </div>
    </a>
    <a class="right-next"
       href="coverages.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Coverages</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#method">Method</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mapproxy-seed">mapproxy-seed</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#options">Options</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration">Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seeds"><code class="docutils literal notranslate"><span class="pre">seeds</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caches"><code class="docutils literal notranslate"><span class="pre">caches</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grids"><code class="docutils literal notranslate"><span class="pre">grids</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#levels"><code class="docutils literal notranslate"><span class="pre">levels</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coverages"><code class="docutils literal notranslate"><span class="pre">coverages</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#refresh-before"><code class="docutils literal notranslate"><span class="pre">refresh_before</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cleanups"><code class="docutils literal notranslate"><span class="pre">cleanups</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2"><code class="docutils literal notranslate"><span class="pre">caches</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3"><code class="docutils literal notranslate"><span class="pre">grids</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4"><code class="docutils literal notranslate"><span class="pre">levels</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5"><code class="docutils literal notranslate"><span class="pre">coverages</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-all"><code class="docutils literal notranslate"><span class="pre">remove_all</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-before"><code class="docutils literal notranslate"><span class="pre">remove_before</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7"><code class="docutils literal notranslate"><span class="pre">coverages</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#output">Output</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-background-seeding">Example: Background seeding</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By MapProxy Community, <a href="http://mapproxy.org/about">Legal</a>
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Last updated on Apr 10, 2025.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>